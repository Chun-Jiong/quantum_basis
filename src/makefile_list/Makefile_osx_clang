CXX       = clang++
CPPFLAGS  = -g -O2 -std=c++11 -Weverything -Wno-c++98-compat-pedantic -Wno-c++98-compat -Wno-extra-semi -Wno-sign-conversion -m64 -isystem /usr/local/Cellar/boost/1.64.0_1/include -isystem ${MKLROOT}/include -isystem ${HOME}/opt/arpackpp/include -isystem ${HOME}/opt/arpackpp/examples/areig
LIBS      = -L/usr/local/lib -larpack -L${MKLROOT}/lib -Wl,-rpath,${MKLROOT}/lib -lmkl_intel_lp64 -lmkl_intel_thread -lmkl_core -liomp5 -lpthread -lm -ldl

OBJS      = lattice.o miscellaneous.o model.o lanczos.o sparse.o operators.o basis.o

EXEC      = ../bin/test.x


test: $(OBJS) test.o test_basis.o test_lanczos.o test_lattice.o test_operator.o
	$(CXX) $(OBJS) test.o test_basis.o test_lanczos.o test_lattice.o test_operator.o $(OPTS) $(LIBS) -o ../bin/test.x

libqbasis.a: $(OBJS)
	ar rvs libqbasis.a $(OBJS)

install: libqbasis.a
	$(RM) ${HOME}/installs/lib/libqbasis.*; cp libqbasis.a ${HOME}/installs/lib; cp qbasis.h ${HOME}/installs/include

%.o: %.cc
	$(CXX) $(CPPFLAGS)  -c -o $@ $<

clean:
	$(RM) *.o
